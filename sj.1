.Dd November 20, 2015
.Dt SJ 1
.Os
.Sh NAME
.Nm sj
.Nd XMPP client daemon
.Sh SYNOPSIS
tcpclient host port [tlsc] \\
.Nm
.Op Fl d Ar dir
.Op Fl r Ar res
.Op Fl s Ar server
.Op Fl u Ar user
.Sh DESCRIPTION
The
.Nm
is a client daemon to the XMPP chat protocol.
It handle the protocol initiation, authentication and keep-alive pings.
During the STARTTLS part of the initiation
.Nm
automatically starts
.Xr tlsc 1
with its own arguments.
After an XMPP session is established
.Nm
starts
.Xr messaged 1 ,
.Xr presenced 1
and
.Xr iqd 1
and delegated all corresponding stanzas through
.Xr pipe 2
to these daemons.
.Nm
exits
if one of these pipes is widowed.
.sp 1
The options are as follows:
.Bl -tag -width Ds
.It Fl d Ar dir
sets the path to
.Ar dir .
This option overrides the environment SJ_DIR.
Default is the current working directory.
.It Fl r Ar res
sets the resource part of the users JID.
.It Fl s Ar server
sets the host part of the users JID.
.It Fl u Ar user
sets the username.
.El
.Sh ENVIRONMENT
.Bl -tag -width SJ_PASSWORD
.It Ev SJ_DIR
Path to sj directory stucture.
.It Ev SJ_USER
Username for xmpp-server login.
.It Ev SJ_SERVER
XMPP server domain name.
.It Ev SJ_RESOURCES
Resources for this XMPP session.
.El
.Sh EXAMPLES
.Bl -tag -width Ds
.It tcpclient example.org 5222 sj -u user -s example.org
This is the recommended way to connect to the default (unencrypted) port and
start
.Xr tlsc 1
implicit through
.Nm
itself after the STARTTLS handshake.
.It tcpclient example.org 5223 tlsc sj -u user -s example.org
This way its directly connecting to the TLS port.
.Nm
does not do the STARTTLS handshake itself.
.El
.Sh SEE ALSO
.Xr ii 1 ,
.Xr iqd 1 ,
.Xr messaged 1 ,
.Xr presenced 1 ,
.Xr socks 1 ,
.Xr tlsc 1
.Sh STANDARDS
XMPP CORE
.%R RFC 6120 ,
XMPP IM
.%R RFC 6121 ,
.%R XEP-0199 XMPP Ping
.Sh AUTHORS
.An -nosplit
The
.Nm
program was written by
.An Jan Klemkow Aq Mt j.klemkow@wemelug.de .
